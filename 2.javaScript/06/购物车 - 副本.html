<!doctype html>
<html>
	<head>
		<!--声明当前页面的编码集：charset=gbk,gb2312(中文编码)，utf-8国际编码-->
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<!--当前页面的三要素-->
		<title>购物车</title>
		<meta name="Keywords" content="关键词,关键词">
		<meta name="description" content="">

		<!--css,js-->
		<link href="../../css/font-awesome.min.css" rel="stylesheet" type="text/css"/>

		<style type="text/css">
			*{margin:0;padding:0;word-wrap: break-word;}
			a{text-decoration:none;color: #9D9C9C;}
			a, button {
				 outline: none;
				 border: 0
			}
			textarea, input, button, select {
				outline: 0;
				font-size: inherit;
				line-height: inherit;
				color: inherit;
				font-family: inherit;
			}
			input, select {
				border: 1px solid #ccc;
			}
			.shop_info .cart-bar .total-price em {
				font-style: normal;
				font-size: 30px;
			}
			h1, h2, h3, h4, h5, h6, em, strong, b {
			font-weight: 400;
			font-size: 100%;
			}
			em, i, small, caption, th {
				font-weight: normal;
				font-style: normal;
				font-size: 100%;
			}
			address, caption, cite, code, dfn, em, strong, th, var {
				font-weight: normal;
				font-style: normal;
			}
			ul,li{list-style:none}
			body{font-size:12px;font-family:"微软雅黑";background:#f1f1f1;}
			.fl{float:left;}
			.fr{float:right;}
			/*头部 start*/
			.shop-header{height:100px;background:#fff;border-bottom:2px solid #ff0066;}
			.shop-header .wrap{width:1240px;line-height:100px;margin:0 auto;background:#ccffff}
			.shop-header .wrap .header-title h2{font-size:28px;font-weight:normal;color:#424242;}
			/*头部 end*/
			.shop_info {
			 padding-top: 38px;
			 padding-bottom: 38px;
			}
			.shop_info .wrap {
			 width: 1240px;
			 margin: 0 auto;
			}
			.shop_goods_list {
			 background-color: #fff;
			}
			.shop_goods_list .list-head {
				height: 70px;
				line-height: 70px;
				padding-right: 26px;
				color: #424242;
			}
			.shop_goods_list .list-head .col {
				float: left;
			}
			.shop_goods_list .col-check {
			  width: 110px;
			}
			.shop_goods_list .col-check .icon-checkbox {
				display: inline-block;
				width: 18px;
				height: 18px;
				line-height: 18px;
				border: 1px solid #e0e0e0;
				margin-left: 24px;
				background-color: #fff;
				color: #fff;
				font-size: 20px;
				text-align: center;
				vertical-align: middle;
				position: relative;
				top: -1px;
				cursor: pointer;
			}
			.shop_goods_list .col-check .icon-checkbox-selected {
				color: #fff;
				border-color: #ff0066;
				background-color: #ff0066;
			}
			.shop_goods_list .list-head .icon-checkbox {
			  margin-right: 15px;
			}
			.shop_goods_list .list-head .col-img {
			 width: 120px;
			}
			.shop_goods_list .list-head .col-name {
				width: 380px;
			}
			.shop_goods_list .col-price {
				width: 75px;
				padding-right: 84px;
				text-align: right;
				color: #424242;
			}
			.shop_goods_list .col-num {
				width: 150px;
				text-align: center;
				color: #424242;
			}
			.shop_goods_list .col-total {
				width: 120px;
				padding-right: 81px;
				text-align: right;
			}
			.shop_goods_list .col-action {
				width: 80px;
				text-align: center;
			}
			.shop_goods_list .item-box {
				padding: 15px 26px 15px 0;
				border-top: 1px solid #e0e0e0;
			}
			.shop_goods_list .item-table {
				display: table;
				border-collapse: collapse;
				border-spacing: 0;
			}
			.shop_goods_list .item-table .item-row {
				display: table-row;
			}
			.shop_goods_list .item-table .col {
				display: table-cell;
				vertical-align: middle;
			}
			.shop_goods_list .item-box .col-img {
				width: 80px;
				height: 80px;
				padding-right: 40px;
				overflow: hidden;
			}
			.shop_goods_list .col-name {
				width: 380px;
			}
			.shop_goods_list .item-box .tags, .shop_goods_list .item-sub-box .tags {
				margin-bottom: 6px;
			}
			.shop_goods_list .col-name .name {
				line-height: 1;
				margin-top: 8px;
				margin-bottom: 8px;
				font-size: 18px;
				font-weight: normal;
				text-overflow: ellipsis;
				white-space: nowrap;
				overflow: hidden;
				_zoom: 1;
			}
			.shop_goods_list .col-name .name a {
			 color: #424242;
			}
			.col-name .desc {
				width: 380px;
				margin: 0;
			}
			.shop_goods_list .col-name .desc {
				color: #757575;
				font-size: 12px;
			}
			.shop_goods_list .item-box .col-price, .shop_goods_list .item-sub-box .col-price {
			  font-size: 16px;
			}
			.shop_goods_list .item-box .col-num, .shop_goods_list .item-sub-box .col-num {
			 font-size: 16px;
			}
			.shop_info .change-goods-num {
				width: 148px;
				height: 38px;
				border: 1px solid #e0e0e0;
				text-align: center;
				background-color: #fff;
				position: relative;
				zoom: 1;
				overflow: hidden;
			}
			.shop_info .change-goods-num a {
				float: left;
				width: 38px;
				height: 38px;
				line-height: 38px;
				color: #757575;
				font-size: 12px;
				-webkit-transition: all 0.3s;
				transition: all 0.3s;
			}
			.shop_info .change-goods-num input {
				float: left;
				width: 72px;
				height: 38px;
				line-height: 38px;
				padding: 0;
				border-width: 0;
				color: #424242;
				font-size: 16px;
				text-align: center;
			}
			.shop_info .s-num {
				position: absolute;
				top: 38px;
				left: 0;
				width: 100%;
				height: 38px;
				line-height: 38px;
				font-size: 32px;
				font-weight: bold;
			}
			.shop_goods_list .col-total {
				width: 120px;
				padding-right: 81px;
				text-align: right;
			}
			.col.col-total {
				color: #ff0066;
				font-size: 16px;
			}
			.shop_goods_list .item-box .pre-info {
				margin: 0;
				font-size: 12px;
				color: #b0b0b0;
			}
			.col.col-action {
				width: 80px;
				text-align: center;
			}
			.shop_goods_list .item-box .col-action .del, .shop_goods_list .item-sub-box .col-action .del {
				display: inline-block;
				width: 24px;
				height: 24px;
				line-height: 24px;
				text-align: center;
				border-radius: 12px;
				color: #757575;
				font-size: 16px;
				-webkit-transition: all 0.3s;
				transition: all 0.3s;
			}
			.shop_goods_list .item-box .col-action .del:hover,.shop_goods_list .item-sub-box .col-action .del:hover{color:#fff;background-color:#e53935}

			.shop_info .cart-bar {
				height: 50px;
				text-align: right;
				background-color: #fff;
				-webkit-transition: background 0.3s ease,top 0.3s ease;
				transition: background 0.3s ease,top 0.3s ease;
				position: relative;
				line-height: 50px;
				margin-top: 20px;
			}
			.shop_info .cart-bar .section-left {
				 float: left;
			}
			.shop_info .cart-bar .back-shopping {
				line-height: 50px;
				margin-left: 32px;
			}
			.shop_info .cart-bar a {
				-webkit-transition: color 0.3s;
				transition: color 0.3s;
			}
			.shop_info .cart-bar .cart-total {
				margin-left: 16px;
				padding-left: 16px;
				border-left: 1px solid #eee;
				color: #757575;
			}
			.shop_info .cart-bar .activity-money {
				padding: 0 13px;
				border-right: 1px solid #eee;
				color: #757575;
			}
			.hide, .none {
			 display: none;
			}
			.shop_info .cart-bar .total-price {
				padding-left: 13px;
				color: #ff0066;
			}
			.shop_info .cart-bar .btn {
				width: 200px;
				height: 48px;
				line-height: 48px;
				font-size: 18px;
				vertical-align: top;
				display: inline-block;
				text-align: center;
			}
			.shop_info .cart-bar a {
				-webkit-transition: color 0.3s;
				transition: color 0.3s;
			}
			.btn-primary{
				background: #ff0066;
				border-color: #ff0066;
				color: #fff;
			}
			.shop_info .cart-bar .btn {
				width: 200px;
				height: 48px;
				line-height: 48px;
				font-size: 18px;
				margin-left: 50px;
				vertical-align: top;
			}
			.shop_info .cart-bar .no-select-tip {
				width: 200px;
				height: 48px;
				line-height: 48px;
				position: absolute;
				top: -58px;
				right: 0;
				background-color: #fff;
				border: 1px solid #ff0066;
				color: #ff0066;
				text-align: center;
			}
			.shop_info .cart-bar .no-select-tip .arrow {
				display: block;
				width: 0;
				height: 0;
				border-style: solid dashed dashed;
				overflow: hidden;
				_zoom: 1;
				position: absolute;
				left: 50%;
			}
			.shop_info .cart-bar .no-select-tip .arrow-a {
				bottom: -8px;
				margin-left: -10px;
				border-width: 8px 10px 0;
				border-color: #ff0066 transparent transparent;
				z-index: 1;
			}
			.shop_info .cart-bar .no-select-tip .arrow-b {
				bottom: -7px;
				margin-left: -8px;
				border-width: 7px 8px 0;
				border-color: #fff transparent transparent;
				z-index: 2;
			}



		</style>

	</head>
<body>
	<!--头部 start-->
	<div class="shop-header">
		<div class="wrap">
			<div class="header-title fl">
				<h2>我的购物车</h2>
			</div>
			<div class="userinfo fr">
			<i class="fa fa-user"></i>&nbsp;怒放de生命
			</div>
		</div>
	</div>
	<!--头部 end-->
	<div class="shop_info">
		<div class="wrap">
			<div class="shop_goods_list">
				<div class="list-head clearfix">
					<div class="col col-check"><i class="iconfont icon-checkbox icon-checkbox-selected" id="K_selectAll">√</i>全选</div>
					<div class="col col-img">&nbsp;</div>
					<div class="col col-name">商品名称</div>
					<div class="col col-price">单价</div>
					<div class="col col-num">数量</div>
					<div class="col col-total">小计</div>
					<div class="col col-action">操作</div>
				</div>
				<div class="list-body" id="K_cartListBody"> 
					<div class="item-box"> 
						<div class="item-table K_cartGoods">
							<div class="item-row clearfix"> 
								<div class="col col-check"> 
									<i class=" icon-checkbox icon-checkbox-selected">√</i>									
								</div>
								<div class="col col-img">
									<a href="#" target="_blank"> 
										<img style="-webkit-user-select: none" src="http://i1.mifile.cn/a1/T1sRhTBsYT1RXrhCrK!80x80.jpg"> 
									</a>
								</div>
								<div class="col col-name">
									<div class="tags"> </div>
									<h3 class="name"> 
										<a href="#" target="_blank"> SanDisk 16GB存储卡（Class4） 黑色 </a>
									</h3>
									<p class="desc"> <span>适配机型：</span> 小米平板 / 1 / 1S, 红米1S/红米, 红米Note/增强版, 红米手机2, 红米手机2A </p>
								</div>
								<div class="col col-price"><i class="fa fa-cny"></i>2元 </div>
								<div class="col col-num"> 
									<div class="change-goods-num clearfix K_changeGoodsNum"> 
										<a href="javascript:void(0)" class="K_minus fl"><i class="fa fa-minus"></i></a>
										<input type="text" name="2134900590_0_buy" value="1" autocomplete="off" class="goods-num K_goodsNum fl">
										<span class="s-num">1</span>
										<a href="javascript:void(0)" class="K_plus fr"><i class="fa fa-plus"></i></a>
									</div>
								</div>
								<div class="col col-total">
									<i class="fa fa-cny"></i>
									<span class="t_price">2</span>元 
									<p class="pre-info">  </p>
								</div>
								<div class="col col-action"> 
									<a id="2134900590_0_buy" data-msg="确定删除吗？" href="javascript:void(0);" title="删除" class="del K_delGoods">
										<i class="fa fa-remove"></i>
									</a>
								</div>
							
							
							</div>
						</div>
					</div>
					<div class="item-box"> 
						<div class="item-table K_cartGoods"> 
							<div class="item-row clearfix"> 
								<div class="col col-check">  
									<i class=" icon-checkbox icon-checkbox-selected">√</i>  
								</div> 
								<div class="col col-img">  
									<a href="http://item.mi.com/1134900527.html" target="_blank"> 
										<img alt="" src="http://i1.mifile.cn/a1/T1sRhTBsYT1RXrhCrK!80x80.jpg" width="80" height="80"> 
									</a>  
								</div> 
								<div class="col col-name">  
									<div class="tags"> </div>  
									<h3 class="name">  
										<a href="http://item.mi.com/1134900527.html" target="_blank"> SanDisk 16GB存储卡（Class4） 黑色 </a>  
									</h3>   
									<p class="desc"> <span>适配机型：</span> 小米平板 / 1 / 1S, 红米1S/红米, 红米Note/增强版, 红米手机2, 红米手机2A </p>
								</div> 
								<div class="col col-price"><i class="fa fa-cny"></i>3元 </div> 
								<div class="col col-num">  
									<div class="change-goods-num clearfix K_changeGoodsNum"> 
										<a href="javascript:void(0)" class="K_minus fl"><i class="fa fa-minus"></i></a> 
										<input tyep="text" name="2134900590_0_buy" value="1" autocomplete="off" class="goods-num K_goodsNum fl"> 
										<span class="s-num">1</span>
										<a href="javascript:void(0)" class="K_plus fr"><i class="fa fa-plus"></i></a>  
									</div>  
								</div> 
								<div class="col col-total"> <i class="fa fa-cny"></i><span class="t_price">3</span>元 <p class="pre-info">  </p> </div> 
								<div class="col col-action"> 
									<a id="2134900590_0_buy" data-msg="确定删除吗？" href="javascript:void(0);" title="删除" class="del K_delGoods">
										<i class="fa fa-remove"></i>
									</a> 
								</div> 
							</div> 
						</div>
					</div>
				</div>
			</div>
			<div class="cart-bar clearfix" id="K_cartBar">
				<div class="section-left">
					<a href="http://list.mi.com/0" class="back-shopping K_goShoping" data-stat-id="3d1e5bdd191768c8" onclick="_msq.push(['trackEvent', '08fae3d5cb3abaaf-3d1e5bdd191768c8', '#', 'pcpid']);">继续购物</a>
					<span class="cart-total">共 <i id="K_cartTotalNum">8</i> 件商品，已选择 <i id="K_selTotalNum">8</i> 件</span>
					<span class="cart-coudan hide" id="K_coudanTip">
							，还需 <i id="K_postFreeBalance"></i> 元即可免邮费  <a href="javascript:void(0);" id="K_showCoudan" data-stat-id="69b06f1a9d2d512c" onclick="_msq.push(['trackEvent', '08fae3d5cb3abaaf-69b06f1a9d2d512c', 'javascript:void(0);', 'pcpid']);">立即凑单</a>
					</span>
				</div>
				<span class="activity-money hide">
						活动优惠：减 <i id="K_cartActivityMoney">0</i> 元
				</span>
				<span class="total-price">
						合计（不含运费）：<em id="K_cartTotalPrice">￥5</em>元
				</span>
				<a href="javascript:void(0);" class="btn btn-a btn-primary" id="K_goCheckout">去结算</a>
				<div class="no-select-tip" id="K_noSelectTip">
						请勾选需要结算的商品
						<i class="arrow arrow-a"></i>
						<i class="arrow arrow-b"></i>
				</div>
			</div>
		</div>
	</div>
	

<script type="text/javascript" src="../../js/jquery-1.11.2.min.js"></script>
<script>
	$(function(){
		/*
			1:数字累加和递减
			2:总金额的计算
			3:选择控制金额，删除控制金额
			4:表头金额和数量的排序	K_goodsNum			
		*/

		//加载就进行一次计算
		getTotal();

		//全选/全选取消事件
		$("#K_selectAll").on("click",function(){
			var mark = $(this).hasClass("icon-checkbox-selected");
			$itemsbox = $("#K_cartListBody").find(".icon-checkbox");
			$itemsbox.each(function(){					
				var thismark = $(this).hasClass("icon-checkbox-selected");			
				if(mark){
					if(thismark){
						$(this).removeClass("icon-checkbox-selected");
					}
					$("#K_selectAll").removeClass("icon-checkbox-selected");	
				}else{
					if(!thismark){
						$(this).addClass("icon-checkbox-selected");
						
					}	
					$("#K_selectAll").addClass("icon-checkbox-selected");	
				}
			});
			//返回cpu计算的总金额=====执行函数是cpu去执行的。
			getTotal();
		});
		
		//meiyou 


		//光标移动事件
		$("#K_cartListBody").find(".K_goodsNum").on("blur",function(){
			var val =  $(this).val() * 1;
			if(val<=1){
				$(this).val(1);
			}
			getTotal();
		});

		//减号事件
		$(".K_minus").on("click",function(){
			var $input = $(this).next();
			var val = $input.val() * 1;
			var $span = $(this).next().next();
			if(val<=1)return;
			val--;
			$span.text(val).stop(true,true).animate({top:-38},480,function(){
				$input.val(val);
				$(this).css("top",38);
				//点击计算
				getTotal();
			});
		});

		//加号事件
		$(".K_plus").on("click",function(){
			var $input = $(this).prev().prev();
			var val = $input.val() * 1;
			var $span = $(this).prev();
			val++;
			$span.text(val).stop(true,true).animate({top:-38},480,function(){
				$input.val(val);
				$(this).css("top",38);
				//点击计算
				getTotal();
			});
		});

		//删除事件
		$("#K_cartListBody").find(".fa-remove").on("click",function(){
			var $parents = $(this).parents(".item-box");
			$parents.fadeOut("slow",function(){
				$(this).remove();
				getTotal();
			});
			
		});

		//选择事件
		$("#K_cartListBody").find(".icon-checkbox").on("click",function(){
			$(this).toggleClass("icon-checkbox-selected");
			getTotal();
		});

		//计算价格
		function countPrice(){
			//拿到盒子对象
			var $itemsbox = $("#K_cartListBody").children();
			//总金额的累加
			var total = 0;
			//循环所有的盒子
			$itemsbox.each(function(){
				//判断一个元素是否包含一个className，如果包含返回true,否则返回false
				var mark = $(this).find(".icon-checkbox").hasClass("icon-checkbox-selected");
				if(mark){
					//拿到盒子数量
					var val = $(this).find(".K_goodsNum").val();
					//拿到盒子的金额
					var price = parseFloat($(this).find(".col-price").text());
					//计算金额
					var cp = val * price;
					//小计
					$(this).find(".t_price").text(cp);
					//总金额累加
				    total += cp;
				}
				//返回cpu计算的总金额=====执行函数是cpu去执行的。
			});
			return total;
		}

		//获得总金额
		function getTotal(){
			//获取计算总金额
			var total = countPrice();
			//赋予目标盒子数值
			$("#K_cartTotalPrice").text("￥"+total);
		}
	});
</script>
</body>
</html>